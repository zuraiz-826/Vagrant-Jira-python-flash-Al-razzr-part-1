Lab Name: 12. Basic Error Handling and Custom 404 Page

Objectives

Understand how to handle errors in web applications.
Learn to create a custom 404 error page.
Gain experience in defining error handlers using Flask.
Prerequisites

Basic knowledge of Python.
Familiarity with Flask framework.
Python and Flask installed on your machine. You can install Flask using pip:
pip install flask
Tasks

Set Up Your Flask Environment

Create a Python Virtual Environment:
To keep dependencies organized and avoid version conflicts, we use a virtual environment. In your project directory, run:

python -m venv venv
Activate the virtual environment:

On Windows:
venv\Scripts\activate
On macOS/Linux:
source venv/bin/activate
Install Flask:
While your virtual environment is active, install Flask:

pip install flask
Initialize a Basic Flask Application

Create a New File:
Name your new file app.py. This will be your main application file.

Write Basic Flask Application Code:
Open app.py and write:

from flask import Flask

app = Flask(__name__)

@app.route('/')
def home():
    return 'Welcome to the Home Page!'

if __name__ == '__main__':
    app.run(debug=True)
This sets up a simple Flask application with a single home route.

Define a Custom 404 Error Handler

Create the Error Handler:
Still in app.py, add an error handler for 404 errors, below your existing code:

@app.errorhandler(404)
def page_not_found(e):
    return "<h1>404</h1><p>Oops! Page not found. Please check the URL and try again.</p>", 404
This handler will capture any 404 errors and return a HTML response with a status code of 404.

Test the Error Handler

Run Your Flask Application:
Start the Flask application by running:

python app.py
Check the Home Route:
Ensure your application is running correctly by navigating to http://localhost:5000/ in your web browser. You should see "Welcome to the Home Page!".

Test a Non-Existent Route:
Enter a URL that doesn't exist on your server, such as http://localhost:5000/unknown. You should see your custom 404 message: "Oops! Page not found. Please check the URL and try again."

Enhance the 404 Page with a Template

Create a Templates Directory:
In your project folder, create a directory named templates.

Create a Template for 404:
Inside the templates directory, create a file named 404.html:

<html>
<head>
    <title>404 Page Not Found</title>
</head>
<body>
    <h1>404</h1>
    <p>Oops! The page you're looking for does not exist.</p>
</body>
</html>
Update the Error Handler to Use the Template:
Modify the page_not_found function to render the HTML template:

from flask import render_template

@app.errorhandler(404)
def page_not_found(e):
    return render_template('404.html'), 404
Verify the Template-Based Error Page

Restart the Flask Application:
Ensure your Flask app is restarted to implement changes.

Navigate to a Non-Existent Page:
Again, test by entering a bad URL like http://localhost:5000/missing, and confirm your HTML template is displayed.

Conclusion

In this lab, you have successfully learned how to handle 404 errors in a Flask application. You created a custom error page using Flask's error handling capabilities, first with simple HTML response codes and then enhanced using a HTML template. This is a crucial step in improving user experience for your web applications.

