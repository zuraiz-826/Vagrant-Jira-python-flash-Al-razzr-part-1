Lab 14: Basic Auth Flow with Flask
Objectives
Understand and implement a basic authentication flow using Flask.
Learn how to use session management in Flask to maintain user state.
Implement a simple login and logout functionality.
Prerequisites
Basic understanding of Python programming.
Familiarity with Flask framework.
Working knowledge of HTML.
Lab Tasks
Set up a Flask environment for the project.
Create a Flask application with a login route.
Implement session management to maintain user login state.
Develop a logout route to clear the session.
Step-by-Step Instructions
Task 1: Set up a Flask Environment
Install Flask

Ensure you have Python installed (preferably Python 3.6 or above).
Install Flask using pip:
pip install flask
Create a Project Directory

Create a new directory for your project, e.g., flask_auth_lab.
Navigate into this directory:
mkdir flask_auth_lab
cd flask_auth_lab
Initialize a Flask Application

Create a Python file named app.py within your project directory.
Set up a basic Flask application:
from flask import Flask, session, redirect, url_for, request, render_template

app = Flask(__name__)
app.secret_key = 'your_secret_key'  # Necessary for session management
Task 2: Create a Login Route
Design a Simple Login Form

Create a new file templates/login.html:
<form method="post">
  <p><input type="text" name="username" placeholder="Username"></p>
  <p><input type="password" name="password" placeholder="Password"></p>
  <p><input type="submit" value="Login"></p>
</form>
Implement the Login Route

Add the following route to your app.py:
@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        # Simple check for username/password
        if username == 'admin' and password == 'password':
            session['logged_in'] = True
            return redirect(url_for('welcome'))
        else:
            return "Invalid credentials. Please try again."

    return render_template('login.html')
Task 3: Session Management for User State
Define a Welcome Route

This route will be accessible only after successful login:
@app.route('/welcome')
def welcome():
    if 'logged_in' in session:
        return "Welcome to the protected area!"
    else:
        return redirect(url_for('login'))
Understanding Session Management

Flask uses cookies and server-side data to manage user sessions. The variable session['logged_in'] is used to determine if a user is authenticated.
Task 4: Logout Functionality
Implement the Logout Route

Clear the session data to log out the user:
@app.route('/logout')
def logout():
    session.pop('logged_in', None)
    return redirect(url_for('login'))
Test the Application

Run your application:

flask run
Navigate to http://localhost:5000/login to perform login and logout operations.

Conclusion
You've successfully created a basic authentication system using Flask.
You should now understand how session management works in Flask applications.
The concepts learned here can be extended to more robust authentication mechanisms using databases and additional security measures.
