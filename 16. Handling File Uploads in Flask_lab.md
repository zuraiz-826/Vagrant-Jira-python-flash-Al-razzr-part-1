Lab Name: Handling File Uploads in Flask
Lab Objectives
Understand how to create a basic file upload system using Flask.
Learn how to handle file uploads securely.
Configure Flask to manage uploads with a specified directory.
Use request.files to process the file data.
Prerequisites
Basic understanding of Python programming.
Familiarity with Flask and web development concepts.
Installed Python and Flask on your development machine.
Lab Tasks
Set up a basic Flask application.
Create a file upload form in HTML.
Configure the Flask application to handle file uploads.
Implement file saving on the server.
Test the file upload functionality.
Task 1: Set Up a Basic Flask Application
Description
Set up a basic Flask application to serve as the foundation for handling file uploads.

Steps
Create a Virtual Environment
Navigate to your project directory and create a virtual environment:

python3 -m venv venv
Activate the Virtual Environment
Activate the virtual environment to install dependencies:

Windows:
venv\Scripts\activate
Linux/Mac:
source venv/bin/activate
Install Flask
Install Flask using pip:

pip install Flask
Create a Flask App File
Create a new Python file named app.py and add the basic structure:

from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return "Hello, Flask!"

if __name__ == '__main__':
    app.run(debug=True)
Task 2: Create a File Upload Form in HTML
Description
Create an HTML form that allows users to upload files.

Steps
Create a Templates Directory
Within your project directory, create a folder named templates.

Create an HTML File
Create a new file named upload.html within the templates directory:

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File</title>
</head>
<body>
    <h2>Upload File</h2>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file">
        <input type="submit" value="Upload">
    </form>
</body>
</html>
Task 3: Configure Flask to Handle File Uploads
Description
Configuring Flask to handle file uploads by specifying an upload directory.

Steps
Update app.py File

Import necessary modules:
import os
from flask import request, redirect, url_for, render_template
Set the Upload Directory
Add the following configuration in app.py:

UPLOAD_FOLDER = 'uploads'
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
Task 4: Implement File Saving on the Server
Description
Process and save the uploaded file to the configured server directory.

Steps
Handle File Upload in app.py
Modify app.py to handle file uploads:

@app.route('/upload', methods=['POST'])
def upload_file():
    if 'file' not in request.files:
        return "No file part"
    file = request.files['file']
    if file.filename == '':
        return "No selected file"
    if file:
        filename = file.filename
        file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
        return "File uploaded successfully"
Add Index Route Rendering the HTML Form
Modify the index route to render the form:

@app.route('/')
def index():
    return render_template('upload.html')
Task 5: Test the File Upload Functionality
Description
Test the file upload functionality to ensure files can be uploaded and saved successfully.

Steps
Run the Flask Application
Execute the Flask app by running app.py:

python app.py
Open the Application in a Web Browser
Navigate to http://127.0.0.1:5000 in your web browser.

Upload a File

Use the form to select a file from your computer.
Click "Upload" to test file upload functionality.
Verify the file is saved in the uploads directory.
Conclusion
By completing this lab, you have learned how to handle file uploads in Flask. You configured an uploads directory, processed file uploads via request.files, and saved files to a server location. This foundational knowledge can be expanded with additional security and validation measures for more complex applications.

