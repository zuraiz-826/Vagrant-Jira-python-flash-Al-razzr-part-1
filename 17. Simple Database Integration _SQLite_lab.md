Lab Name: 17. Simple Database Integration (SQLite)
Objectives:

Understand the basics of SQLite and how to integrate it into an application.
Learn to create and connect to an SQLite database using Python.
Execute basic SQL queries and display results.
Implement a simple route to process and present data from the database.
Prerequisites:

Basic knowledge of Python programming.
Familiarity with SQL and basic database concepts.
Python installed on your local machine.
SQLite3 module installed (usually comes with Python).
Lab Tasks:

Task 1: Set Up the Environment
Create a New Directory for the Project

Open your terminal or command prompt.
Navigate to your chosen location and create a new directory:
mkdir sqlite_lab
cd sqlite_lab
Create a Virtual Environment (optional but recommended)

Run the following command to create a virtual environment:
python -m venv venv
Activate the virtual environment:
On Windows:
.\venv\Scripts\activate
On macOS/Linux:
source venv/bin/activate
Install Required Packages

Ensure you have sqlite3 (included by default) and install any additional needed libraries:
pip install flask
Task 2: Create an SQLite Database
Create a Database File

Launch a Python interactive session or use a script:
import sqlite3
connection = sqlite3.connect('example.db')
Create a Table

Use the following code to create a users table in the database:
cursor = connection.cursor()

cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    age INTEGER
)
''')

connection.commit()
Insert Sample Data

Insert some data to test your setup:
cursor.execute('''
INSERT INTO users (name, age) VALUES
('Alice', 30),
('Bob', 25),
('Charlie', 35)
''')

connection.commit()
connection.close()
Task 3: Integrate with a Web Application
Set Up a Basic Flask Application

Create a file named app.py with the following content:
from flask import Flask, jsonify
import sqlite3

app = Flask(__name__)

def get_db_connection():
    connection = sqlite3.connect('example.db')
    connection.row_factory = sqlite3.Row
    return connection

@app.route('/users')
def users():
    connection = get_db_connection()
    cursor = connection.cursor()
    cursor.execute('SELECT * FROM users')
    users_list = cursor.fetchall()
    connection.close()

    results = []
    for row in users_list:
        results.append({"id": row["id"], "name": row["name"], "age": row["age"]})

    return jsonify(results)

if __name__ == '__main__':
    app.run(debug=True)
Run the Flask App

Make sure your virtual environment is active, and run the Flask app:
flask run
Test the Endpoint

Open a web browser and go to http://127.0.0.1:5000/users.
You should see a JSON response with the users from the database.
Conclusion
In this lab, you learned how to integrate a simple SQLite database into a Python application using Flask. You covered creating a database and table, inserting data, and retrieving and displaying data through a web application. SQLite's ease of use makes it perfect for small to medium applications or as a lightweight database solution during the development phase. Practice with more complex queries and deeper integrations to further your learning.

